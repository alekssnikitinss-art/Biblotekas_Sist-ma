<<!doctype html>
<html lang="lv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bibliotēka — Guest</title>
  <link rel="stylesheet" href="stylessheet/style.css">
  <style>
    .container{max-width:900px;margin:20px auto;padding:10px}
    nav a{margin-right:12px}
    .book{border:1px solid #ddd;padding:8px;margin:8px 0;display:flex;gap:12px}
    .book img{width:80px;height:100px;object-fit:cover}
    input{margin:4px 0;padding:6px}
  </style>
</head>
<body>

<div class="container">

  <header>
    <h1>Bibliotēka — Guest</h1>
    <nav>
      <a href="index.html">Guest</a>
      <a href="user.html">User</a>
      <!-- admin.html saiti neizmantojam -->
    </nav>
  </header>

  <!-- GUEST BOOK LIST -->
  <section id="books">
    <h2>Grāmatu saraksts (Publiskais skats)</h2>
    <input id="search" placeholder="Meklēt pēc nosaukuma vai autora" style="width:100%" />
    <div id="books-container"></div>
  </section>

</div>

<script src="app.js"></script>
<script>
  // public guest skats — tikai grāmatas
  (async function(){
    const searchEl = document.getElementById('search');
    const container = document.getElementById('books-container');

    async function render(query) {
      container.innerHTML = '<p>Loading...</p>';
      const items = await searchBooks(query);
      container.innerHTML = '';

      items.forEach(b => {
        const div = document.createElement('div');
        div.className = 'book';
        div.innerHTML = `
          <div>
            ${b.image 
              ? `<img src="${b.image}" alt="${b.title}">` 
              : '<div style="width:80px;height:100px;background:#eee;display:flex;align-items:center;justify-content:center">No image</div>'
            }
          </div>
          <div style="flex:1">
            <strong>${escapeHtml(b.title)}</strong>
            <div>${escapeHtml(b.author)}</div>
            <div>ISBN: ${escapeHtml(b.isbn || '')}</div>
            <div>Status: ${escapeHtml(b.status)}</div>
          </div>
        `;
        container.appendChild(div);
      });
    }

    searchEl.addEventListener('input', () => render(searchEl.value));
    render('');
  })();
</script>

</body>
</html>